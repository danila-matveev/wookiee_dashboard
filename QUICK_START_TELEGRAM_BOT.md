# –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram –±–æ—Ç–∞ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –Ω–∞ Vercel

## üöÄ –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### –®–∞–≥ 1: –£–∑–Ω–∞—Ç—å URL –ø—Ä–æ–µ–∫—Ç–∞ Vercel

1. –û—Ç–∫—Ä–æ–π—Ç–µ [Vercel Dashboard](https://vercel.com/dashboard)
2. –ù–∞–π–¥–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç `wookiee_dashboard`
3. URL –±—É–¥–µ—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ: `https://wookiee-dashboard-xxx.vercel.app`

**–ò–ª–∏:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ Vercel Dashboard ‚Üí Project ‚Üí Settings ‚Üí Environment Variables ‚Üí `APP_BASE_URL`

---

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å /health endpoint

```bash
# –ó–∞–º–µ–Ω–∏—Ç–µ YOUR_VERCEL_URL –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π URL
curl https://YOUR_VERCEL_URL/health
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** `{"status":"ok"}`

**–ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –¥–µ–ø–ª–æ–π –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —É—Å–ø–µ—à–Ω–æ –≤ Vercel Dashboard

---

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Telegram Webhook

#### –í–∞—Ä–∏–∞–Ω—Ç A: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
cd /Users/danilamatveev/Desktop/–î–æ–∫—É–º–µ–Ω—Ç—ã/Cursor/wookiee_dashboard
./scripts/setup_telegram_webhook.sh
```

–°–∫—Ä–∏–ø—Ç –ø–æ–ø—Ä–æ—Å–∏—Ç:
- –¢–æ–∫–µ–Ω –±–æ—Ç–∞ (TELEGRAM_BOT_TOKEN) ‚Äî –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ —É [@BotFather](https://t.me/BotFather)
- URL –ø—Ä–æ–µ–∫—Ç–∞ Vercel

#### –í–∞—Ä–∏–∞–Ω—Ç B: –í—Ä—É—á–Ω—É—é

```bash
# –ó–∞–º–µ–Ω–∏—Ç–µ YOUR_BOT_TOKEN –∏ YOUR_VERCEL_URL
curl -X POST "https://api.telegram.org/botYOUR_BOT_TOKEN/setWebhook" \
  -d "url=https://YOUR_VERCEL_URL/webhook/telegram"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å webhook
curl "https://api.telegram.org/botYOUR_BOT_TOKEN/getWebhookInfo"
```

---

### –®–∞–≥ 4: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–æ—Ç–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram
2. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ: `/start your@email.com` (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à email –∏–∑ Bitrix24)
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Bitrix24 ‚Äî —Ç–∞–º –¥–æ–ª–∂–µ–Ω –ø—Ä–∏–π—Ç–∏ –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
5. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É: `/code 123456` (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –∫–æ–¥)

---

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)

1. [Vercel Dashboard](https://vercel.com/dashboard) ‚Üí –≤–∞—à –ø—Ä–æ–µ–∫—Ç ‚Üí **Deployments**
2. –ü–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π ‚Üí **View Function Logs**

–ò—â–∏—Ç–µ:
- `Received webhook update` ‚Äî webhook –ø–æ–ª—É—á–µ–Ω ‚úÖ
- `Update processed successfully` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ —É—Å–ø–µ—à–Ω–∞ ‚úÖ
- `ERROR` ‚Äî –æ—à–∏–±–∫–∏ ‚ùå

---

## üìã –ß–µ–∫-–ª–∏—Å—Ç

- [ ] –î–µ–ø–ª–æ–π –Ω–∞ Vercel –∑–∞–≤–µ—Ä—à—ë–Ω —É—Å–ø–µ—à–Ω–æ
- [ ] `/health` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `{"status":"ok"}`
- [ ] Webhook —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ —á–µ—Ä–µ–∑ `getWebhookInfo`)
- [ ] –í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ Vercel:
  - [ ] `TELEGRAM_BOT_TOKEN`
  - [ ] `BITRIX24_WEBHOOK`
  - [ ] `SUPABASE_URL`
  - [ ] `SUPABASE_SERVICE_ROLE_KEY`
  - [ ] `APP_BASE_URL`
- [ ] –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—É `/start`
- [ ] –ö–æ–¥ –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤ Bitrix24
- [ ] –ü—Ä–∏–≤—è–∑–∫–∞ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ

---

## üîß –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `/health` endpoint
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ webhook —á–µ—Ä–µ–∑ `getWebhookInfo`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Vercel Dashboard
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã

### Webhook –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è
- URL –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `https://`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `/webhook/telegram` –¥–æ—Å—Ç—É–ø–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞

### –ö–æ–º–∞–Ω–¥—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Vercel Dashboard
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ email —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ Bitrix24
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ webhook –≤ Bitrix24 (–Ω—É–∂–Ω—ã `user`, `im`)

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** `scripts/check_vercel_deployment.md`
- **README –±–æ—Ç–∞:** `apps/telegram_assistant/README.md`
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤:** `SECRETS_SETUP.md`
